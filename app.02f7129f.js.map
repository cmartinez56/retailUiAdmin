{"version":3,"sources":["webpack:///./src/utility/helpers.js","webpack:///./src/models/home/menuStore.js","webpack:///./src/GlobalProviders.js","webpack:///./src/desktop/home/FullMenuNav.js","webpack:///./src/utility/useIsMobile.js","webpack:///./src/desktop/accounts/LoggedOut.js","webpack:///./src/desktop/home/HomeMain.js","webpack:///./src/route/RouteConfig.js","webpack:///./src/index.js","webpack:///./src/models/accounts/userAuthStore.js","webpack:///./src/models/configStore.js","webpack:///./src/utility/modelContext.js","webpack:///./src/models/accounts/accountModel.js","webpack:///./src/models/accounts/userMessages.js","webpack:///./src/desktop/accounts/LoginStart.js","webpack:///./src/route/history.js"],"names":["connectArray","component","arrayOfModels","styles","intermediateComponents","startComponent","withStyles","forEach","model","index","push","params","connect","length","handleResponse","response","ok","json","Error","status","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","Blob","type","mobileOnly","GlobalProviders","children","ModelProvider","mainLinksAll","label","icon","Home","selected","window","location","href","includes","link","route","isMobile","AttachMoney","featureId","VpnKeyRounded","filter","bottomLinks","Input","FullMenuNav","userFeatures","firstName","lastName","userLoggedIn","picUrl","useState","innerWidth","setIsMobile","resize","useEffect","addEventListener","removeEventListener","useIsMobile","classes","useStyles","useAuth0","isAuthenticated","isLoading","user","error","mainLinks","loginWithRedirect","logout","undefined","indexOf","console","log","onMenuClose","expandMenu","userLabel","name","imageUrl","decodeURIComponent","picture","className","mainContainer","accountModel","makeStyles","marginLeft","Typography","LoggedOut","onNotifyMainNavOfLogOff","clearToken","returnTo","origin","id","Card","style","display","outerCard","CardContent","cardContainer","src","logo","messageContainer","Info","iconSpacing","CardActions","Button","variant","color","actionButton","onClick","marginRight","width","maxWidth","margin","leftContainer","height","paddingLeft","minHeight","HomeMain","history","email","user_metadata","retailDomain","exact","path","RouteComponent","state","componentDidMount","initAuthStore","setState","this","props","auth0","getAccessTokenSilently","a","accessToken","message","getToken","render","LoginRoute","getLoginRoute","MenuNav","permission","React","Component","withAuth0","muiTheme","createMuiTheme","typography","useNextVariants","palette","textColor","grey","A700","primary","main","success","idle","yellow","secondary","domain","process","clientId","audience","redirectUri","theme","RouteConfig","document","querySelector","userAuthData","token","localStorage","getItem","signatureUrl","featurePermissions","userId","expiresOn","parseInt","logOutTimer","stringFeatures","JSON","parse","ex","setLogOutTimer","navigate","require","clearLogOutTimer","msToTimeOut","Date","setTimeout","clearTimeout","isLoggedIn","getStore","hasFeature","setToken","userName","setItem","tokenData","substring","features","exp","getTime","stringify","removeItem","configStore","apiToken","createModel","getInitialState","ModelContext","getConfig","provider","userStore","userNotAuthorized","faceLoginMessage","passwordMessage","confirmPasswordMessage","profileLoading","onSetAccount","onCreateProfile","onFaceLogin","checkPassword","clearPasswordMessage","onPasswordLogin","loginInfo","imageSrc","password","signatureSrc","split","profileImage","sigSplit","signatureBlob","payload","action","profileUrl","collectionId","url","profileApiCode","bucketName","formData","FormData","append","fetch","method","credentials","body","then","result","FaceId","userRole","profileLoaded","profileLoadingError","profileLoadingMessage","profileLoadingMessageError","catch","profile","createUserApi","image","profilesApiCode","getUserAccountPassword","confirmPassword","passw","match","createContext","classInstance","testMode","Provider","value","UserComponent","componentProps","Consumer","vm","minWidth","textAlign","cardActionsContainer","flexDirection","LogIn","historyModel","loaded","LoginRouteComponent","setHistory","getHistory","withRouter"],"mappings":"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","file":"app.02f7129f.js","sourcesContent":["import {withStyles} from \"@material-ui/styles\";\r\n\r\nexport const connectArray = (component, arrayOfModels, styles = null) => {\r\n    const intermediateComponents = [];\r\n    const startComponent = styles !== null ?\r\n        withStyles(styles)(component) : component;\r\n\r\n    arrayOfModels.forEach((model, index) => {\r\n        if(index === 0) {\r\n            const newItem = (params) => model.connect(startComponent, params);\r\n            intermediateComponents.push(newItem);\r\n        } else {\r\n            const newItem = (params) => model.connect(intermediateComponents[index - 1], params);\r\n            intermediateComponents.push(newItem);\r\n        }\r\n    });\r\n\r\n    return intermediateComponents[intermediateComponents.length - 1];\r\n};\r\n\r\nexport const inTable = (onClickFunc) => {\r\n    return (event, target) => {\r\n        event.stopPropagation();\r\n        onClickFunc(event, target);\r\n    };\r\n};\r\n\r\nexport const getItemPropertyValue = function (targetObject, fieldName) {\r\n    let propValue = targetObject || \"\";\r\n\r\n    if(typeof(fieldName) === 'function')\r\n        propValue = fieldName(targetObject);\r\n    else if(fieldName !== \"\") {\r\n        const childFields = fieldName && fieldName.split('.') || [];\r\n        //get to the property value by iterating through the object structure\r\n        childFields.forEach((childField) => {\r\n            propValue = propValue && propValue[childField];\r\n        });\r\n    }\r\n\r\n    return propValue;\r\n};\r\n\r\nexport const filterOutExistingByField = (fullList, existingList, fieldNameFull, fieldNameExisting) => {\r\n    ///<summary>calculate remaining Ids.  Provide list of Ids and Object that has key field</summary>\r\n    ///<param name=\"fullList\" type=\"Array\">Full List that you start out with</param>\r\n    ///<param name=\"existingList\" type=\"Array\">List to filter out from full list</param>\r\n    return Array.isArray(fullList) && fullList.filter(function (el) {\r\n        const startValue = getItemPropertyValue(el, fieldNameFull);\r\n        for (let iExisting = 0; iExisting < (Array.isArray(existingList) ? existingList.length : 0); iExisting++) {\r\n            const existingField = fieldNameExisting || fieldNameExisting === \"\" ? fieldNameExisting : fieldNameFull;\r\n            const existingValue = getItemPropertyValue(existingList[iExisting], existingField);\r\n            if (startValue === existingValue)\r\n                return false;\r\n        }\r\n        return true;\r\n    }) || [];\r\n};\r\n\r\nexport const filterOutExistingByArrayId = (fullList, existingList, fieldNameFull) => {\r\n    ///<summary>calculate remaining Ids.  Provide list of Ids to exclude</summary>\r\n    ///<param name=\"fullList\" type=\"Array\">Full List that you start out with</param>\r\n    ///<param name=\"existingList\" type=\"Array\">List to filter out from full list</param>\r\n    return Array.isArray(fullList) && fullList.filter(function (el) {\r\n        const startValue = getItemPropertyValue(el, fieldNameFull);\r\n        for (let iExisting = 0; iExisting < (Array.isArray(existingList) ? existingList.length : 0); iExisting++) {\r\n            const existingValue = existingList[iExisting];\r\n            if (startValue === existingValue)\r\n                return false;\r\n        }\r\n        return true;\r\n    }) || [];\r\n};\r\n\r\nexport function shuffleArray(array) {\r\n    let currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n\r\n        // And swap it with the current element.\r\n        temporaryValue = array[currentIndex];\r\n        array[currentIndex] = array[randomIndex];\r\n        array[randomIndex] = temporaryValue;\r\n    }\r\n\r\n    return array;\r\n}\r\n\r\nexport const handleResponse = () => {\r\n    return function(response) {\r\n        if(response.ok) {\r\n            return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n    };\r\n};\r\n\r\nexport const  b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {\r\n    const byteCharacters = atob(b64Data);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize)\r\n\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i)\r\n        }\r\n\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        byteArrays.push(byteArray)\r\n    }\r\n\r\n    return new Blob(byteArrays, { type: contentType })\r\n};\r\n","import {AssignmentInd, Group, Home, MusicNote, VpnKeyRounded,\r\n    Message as MessageIcon, AttachMoney} from \"@material-ui/icons\";\r\n\r\nconst mainLinksAll = [\r\n    {label : \"Home\", icon: Home, selected:!(window.location.href.includes('cashMovements') || window.location.href.includes('keyLogs') ), link:\"#/\", route:\"/\", isMobile: true },\r\n    {label : \"Cash Move\", icon: AttachMoney, selected:window.location.href.includes('cashMovements'),  link:\"#/cashMovements\", route:\"/cashMovements\", featureId: 1, isMobile: true },\r\n    {label : \"Key Logs\", icon: VpnKeyRounded, selected:window.location.href.includes('keyLogs'), link:\"#/keyLogs\", route:\"/keyLogs\", featureId: 1, isMobile: true },\r\n];\r\n\r\nexport const getMenus = (mobileOnly)=> {\r\n    if(mobileOnly)\r\n        return mainLinksAll.filter(link => link.isMobile);\r\n    else\r\n        return mainLinksAll;\r\n};\r\n","import React from 'react';\r\nimport AccountModel from \"./models/accounts/accountModel\";\r\n\r\nexport const GlobalProviders = ({children}) => {\r\n\r\n    return (\r\n        <AccountModel.ModelProvider>\r\n                        {children}\r\n        </AccountModel.ModelProvider>\r\n    );\r\n};\r\n","import React, {useState} from 'react';\r\nimport {useIsMobile} from \"../../utility/useIsMobile\";\r\nimport { SideStrip } from \"fancy-menu\"\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {Input\r\n} from \"@material-ui/icons\";\r\nimport accountModel from \"../../models/accounts/accountModel\";\r\nimport {connectArray} from \"../../utility/helpers\";\r\nimport {getMenus} from \"../../models/home/menuStore\";\r\n\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\n\r\nconst mainLinksAll = getMenus();\r\n\r\nconst bottomLinks = [\r\n    {label : \"Logout\", icon: Input, link:\"#/logout\" }\r\n];\r\n\r\nexport const FullMenuNavComponent = ({ children, firstName, lastName,\r\n                                         userLoggedIn, picUrl, userFeatures  }) => {\r\n    const isMobile = useIsMobile();\r\n    const classes = useStyles(isMobile);\r\n\r\n    const {\r\n        isLoading,\r\n        isAuthenticated,\r\n        error,\r\n        user,\r\n        loginWithRedirect,\r\n        logout,\r\n    } = useAuth0();\r\n\r\n    const mainLinks = mainLinksAll.filter(\r\n        (link) => link.featureId === undefined ||\r\n            userFeatures.indexOf(link.featureId) > -1);\r\n\r\n    console.log(user);\r\n\r\n    return (\r\n        isAuthenticated &&\r\n        <div>\r\n            <SideStrip mainLinks={mainLinks}\r\n                       bottomLinks={bottomLinks}\r\n                       onMenuClose={() => {\r\n                          // setOpenMenu(false);\r\n                       }}\r\n                       expandMenu={false}\r\n                       userLabel={user.name}\r\n                       imageUrl={decodeURIComponent(user.picture)}\r\n            />\r\n            <div className={classes.mainContainer}>\r\n                {children}\r\n            </div>\r\n        </div> ||\r\n            <div>{children}</div>\r\n    );\r\n};\r\n\r\nexport const FullMenuNav = connectArray(FullMenuNavComponent,[accountModel]);\r\n\r\nconst useStyles = (isMobile) => makeStyles({\r\n    mainContainer:{marginLeft: isMobile ? 0 : 70},\r\n})();\r\n\r\n","import {useState, useEffect} from \"react\";\r\n\r\nexport const useIsMobile = () => {\r\n    const [isMobile, setIsMobile] = useState(window.innerWidth <= 760);\r\n    const resize = () => {\r\n        setIsMobile(window.innerWidth <= 760);\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", resize);\r\n        return () => {\r\n            window.removeEventListener(\"resize\", resize);\r\n        };\r\n    });\r\n\r\n    return isMobile;\r\n};","import React, { useEffect } from \"react\";\r\nimport {clearToken} from \"../../models/accounts/userAuthStore\";\r\nimport { Card, CardContent,\r\n    CardActions, Button, Typography  } from \"@material-ui/core\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport { Input as LoginIcon, Info } from '@material-ui/icons';\r\nimport accountModel from \"../../models/accounts/accountModel\";\r\nimport {connectArray} from \"../../utility/helpers\";\r\nimport {navigate} from \"../../route/history\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\nexport const LoggedOutComponent = ({onNotifyMainNavOfLogOff, userLoggedIn}) => {\r\n\r\n    const classes = useStyles();\r\n    const { loginWithRedirect,\r\n        logout,\r\n        isAuthenticated,\r\n        isLoading\r\n    } = useAuth0();\r\n    useEffect(() => {\r\n        clearToken();\r\n        if(isAuthenticated)\r\n            logout({returnTo: `${window.location.origin}/#/logout`});\r\n\r\n        if(userLoggedIn)\r\n            onNotifyMainNavOfLogOff();\r\n    });\r\n    // noinspection HtmlUnknownAnchorTarget\r\n    return (\r\n        <form id=\"logout-submit\"\r\n              className={classes.mainContainer}>\r\n            {!isLoading && !isAuthenticated &&\r\n            <Card style={{display: \"flex\"}}>\r\n                <div className={classes.outerCard}>\r\n                    <CardContent className={classes.cardContainer}>\r\n                        <img src={\"retail-shop-flat-icon_small.jpg\"}\r\n                             className={classes.logo}/>\r\n                        <div className={classes.messageContainer}>\r\n                            <Info className={classes.iconSpacing}/><Typography>You have been logged out.</Typography>\r\n                        </div>\r\n                    </CardContent>\r\n                    <CardActions>\r\n                        <Button variant=\"contained\"\r\n                                color=\"secondary\"\r\n                                className={classes.actionButton}\r\n                                onClick={() => {\r\n                                    loginWithRedirect();\r\n                                }}\r\n                        >\r\n                            <LoginIcon style={{marginRight: 10}}/> Login\r\n                        </Button>\r\n\r\n                    </CardActions>\r\n                </div>\r\n            </Card>\r\n            }\r\n            {(isLoading || isAuthenticated ) &&\r\n                <span>... logging out please wait</span>\r\n            }\r\n        </form>\r\n    )\r\n};\r\n\r\nexport const LoggedOut = connectArray(LoggedOutComponent, [accountModel]);\r\n\r\nconst useStyles = makeStyles({\r\n    mainContainer:{width: \"80%\", maxWidth: 460, margin: '100px auto'},\r\n    leftContainer: {height: 400,width: 300, paddingLeft: 4},\r\n    cardContainer: {minHeight: 170},\r\n    logo: {width: 250, margin: \"auto\"},\r\n    actionButton: {width: \"80%\", margin:\"auto\"},\r\n    messageContainer: { display: \"flex\", width:235, margin:\"40px auto\"},\r\n    iconSpacing: { marginRight: 12},\r\n    outerCard: {margin: \"45px auto\"}\r\n});","import React, {useEffect} from \"react\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\nexport const HomeMain = ({history}) => {\r\n    const { user, isAuthenticated } = useAuth0();\r\n\r\n    return (\r\n        <div>\r\n            Hi test\r\n            {isAuthenticated &&\r\n            <div>\r\n                <h2>{user.name}</h2>\r\n                <p>{user.email}</p>\r\n                <p>{user.user_metadata && user.user_metadata.retailDomain}</p>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n};","import React from 'react';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport { GlobalProviders} from \"../GlobalProviders\";\r\nimport {getLoginRoute} from \"./history\";\r\nimport {FullMenuNav} from \"../desktop/home/FullMenuNav\";\r\nimport { LoggedOut } from \"../desktop/accounts/LoggedOut\";\r\nimport {initAuthStore} from \"../models/accounts/userAuthStore\";\r\nimport {HomeMain} from \"../desktop/home/HomeMain\";\r\nimport {PrivateRoute} from \"./PrivateRoute\";\r\nimport { withAuth0 } from \"@auth0/auth0-react\";\r\n\r\nexport class RouteComponent extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = { isMobile: window.innerWidth <= 760 };\r\n    }\r\n\r\n    componentDidMount() {\r\n        initAuthStore();\r\n        const checkSize = ()=> {\r\n            // noinspection JSCheckFunctionSignatures\r\n            this.setState({isMobile: window.innerWidth <= 760});\r\n        };\r\n        window.addEventListener(\"resize\", checkSize);\r\n        const { user, getAccessTokenSilently } = this.props.auth0;\r\n        const getToken = async () =>{\r\n            try {\r\n                const accessToken = await getAccessTokenSilently();\r\n                console.log(accessToken);\r\n\r\n            } catch (ex) {\r\n                console.log(\"---------------\");\r\n                console.log(ex.message || ex);\r\n            }\r\n        };\r\n\r\n        getToken();\r\n    }\r\n\r\n    render() {\r\n        const LoginRoute = getLoginRoute();\r\n        const {isMobile} = this.state;\r\n        const MenuNav = FullMenuNav; //isMobile ? MobileNav :\r\n        return (\r\n            <GlobalProviders>\r\n                    <HashRouter>\r\n                        <MenuNav>\r\n                        <div>\r\n                            <LoginRoute/>\r\n                            <Route exact path=\"/logOut\"\r\n                                   component={LoggedOut} />\r\n\r\n                            <Route exact path=\"/logcomplete\"\r\n                                   component={LoggedOut} />\r\n\r\n\r\n                            <Route permission={1}\r\n                                          exact path=\"/\"\r\n                                          component={isMobile ? HomeMain : HomeMain} />\r\n\r\n\r\n\r\n                        </div>\r\n                        </MenuNav>\r\n                    </HashRouter>\r\n            </GlobalProviders>\r\n        );\r\n    }\r\n}\r\n\r\n/*\r\n\r\n */\r\n\r\nexport default withAuth0(RouteComponent)","import './index.css'\r\nimport React from 'react'\r\nimport {render} from 'react-dom'\r\nimport RouteConfig from  \"./route/RouteConfig\";\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { grey, yellow } from '@material-ui/core/colors';\r\nimport { Auth0Provider } from \"@auth0/auth0-react\";\r\n\r\nconst muiTheme = createMuiTheme({\r\n    typography: {\r\n        useNextVariants: true,\r\n    },\r\n    palette: {\r\n        textColor: grey.A700,\r\n        primary: {\r\n            main: \"#3d6090\",\r\n            success: \"#4caf50\",\r\n            idle: yellow[500]\r\n        },\r\n        secondary: { main: \"#428bca\"}\r\n    }\r\n});\r\n\r\nrender(\r\n    <Auth0Provider\r\n        domain={process.env.AUTH_DOMAIN}\r\n        clientId={process.env.AUTH_CLIENT_ID}\r\n        audience={process.env.AUTH_AUDIENCE}\r\n        redirectUri={window.location.origin}\r\n    >\r\n        <MuiThemeProvider theme={muiTheme}><RouteConfig /></MuiThemeProvider>\r\n    </Auth0Provider>,\r\n    document.querySelector('#app'));\r\n\r\n","\r\nconst userAuthData = {\r\n    token: localStorage.getItem('token'),\r\n    firstName: localStorage.getItem('firstName') || \"\",\r\n    lastName: localStorage.getItem('lastName') || \"\",\r\n    picUrl: localStorage.getItem('picUrl') || \"\",\r\n    signatureUrl: localStorage.getItem('signatureUrl') || \"\",\r\n    featurePermissions: [],\r\n    userId: localStorage.getItem('userId'),\r\n    expiresOn: parseInt(localStorage.getItem('expiresOn')) || 0,\r\n    logOutTimer: -1\r\n};\r\ntry {\r\n    const stringFeatures = localStorage.getItem('featurePermissions');\r\n    userAuthData.featurePermissions = stringFeatures ? JSON.parse(stringFeatures) : [];\r\n} catch (ex) {\r\n    userAuthData.featurePermissions = [];\r\n}\r\n\r\nexport const initAuthStore = ()=> {\r\n    setLogOutTimer(userAuthData.expiresOn);\r\n};\r\n\r\nconst setLogOutTimer = (expiresOn) => {\r\n    const {navigate} = require(\"../../route/history\");\r\n    clearLogOutTimer();\r\n    //time out 60 seconds before token expires\r\n    const msToTimeOut = (expiresOn * 1000 ) - new Date() - 60000;\r\n\r\n    if(msToTimeOut > 30) {\r\n        userAuthData.logOutTimer = setTimeout(\r\n            () => navigate(\"#/logout\"),\r\n            msToTimeOut\r\n        );\r\n    } else if (expiresOn > 0) {\r\n        navigate(\"#/logout\");\r\n    }\r\n};\r\n\r\nconst clearLogOutTimer = () => {\r\n    if(userAuthData.logOutTimer > -1) {\r\n        clearTimeout(userAuthData.logOutTimer);\r\n        userAuthData.logOutTimer = -1;\r\n    }\r\n};\r\n\r\nexport const isLoggedIn = () => userAuthData.token && userAuthData.token !== null;\r\n\r\nexport const getStore = () => userAuthData;\r\nexport const getFullName = () =>\r\n    `${userAuthData.firstName} ${userAuthData.lastName}`;\r\n\r\nexport const hasFeature = (featureId) => {\r\n    return userAuthData.featurePermissions.indexOf(featureId) > -1;\r\n};\r\n\r\nexport const getAuthHeaderValue = () => {\r\n    return userAuthData.token !== null ? `bearer ${userAuthData.token}` : \"\";\r\n};\r\n\r\nexport const setToken = ({token, firstName, lastName, picUrl, signatureUrl, userName}) => {\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('firstName', firstName);\r\n    localStorage.setItem('lastName', lastName);\r\n    localStorage.setItem('picUrl', picUrl);\r\n    localStorage.setItem('signatureUrl', signatureUrl);\r\n    localStorage.setItem('userName', userName);\r\n\r\n    userAuthData.token = token;\r\n    userAuthData.firstName = firstName;\r\n    userAuthData.lastName = lastName;\r\n    userAuthData.picUrl = picUrl;\r\n    userAuthData.signatureUrl = signatureUrl;\r\n\r\n    //const tokenData = readToken(token);\r\n    const tokenData = {\r\n        id: `${firstName.substring(0,1)}${lastName}`,\r\n        features: \"[1,2,3,4,5,6]\",\r\n        exp: (new Date().getTime()/1000|0) + 86400 //one day is 86400 seconds\r\n    };\r\n    console.log(tokenData);\r\n    localStorage.setItem('userId', tokenData.id);\r\n    localStorage.setItem('featurePermissions', JSON.stringify(tokenData.features));\r\n    localStorage.setItem('expiresOn', tokenData.exp);\r\n    userAuthData.featurePermissions = tokenData.features;\r\n    userAuthData.userId = tokenData.id;\r\n    userAuthData.expiresOn = tokenData.exp;\r\n\r\n    console.log(userAuthData);\r\n    setLogOutTimer(tokenData.exp);\r\n    return tokenData;\r\n};\r\n\r\nexport const clearToken = () => {\r\n    userAuthData.token = null;\r\n    userAuthData.userId = null;\r\n    userAuthData.featurePermissions = [];\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userId');\r\n    localStorage.removeItem('featurePermissions');\r\n    localStorage.removeItem('expiresOn');\r\n    localStorage.removeItem('firstName');\r\n    localStorage.removeItem('lastName');\r\n};\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport const readToken = (token) => {\r\n    const split = token && token.split('.');\r\n    if(split && split.length > 0) {\r\n        const base64Url = token.split('.')[1];\r\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        return JSON.parse(window.atob(base64));\r\n    }\r\n    else\r\n        return {};\r\n};\r\n","const configStore = {\r\n    apiToken: \"\"\r\n};\r\n\r\nif(process.env.NODE_ENV === \"development\"){\r\n\r\n}\r\n\r\nexport const getConfig = () => {\r\n    return configStore;\r\n};\r\n\r\nexport const setApiToken = (token) => configStore.apiToken = token;\r\n","import React from \"react\";\r\n\r\nexport const createContext = (createModel, getInitialState) => {\r\n    const ModelContext = React.createContext(createModel());\r\n\r\n    class ModelProvider extends React.Component {\r\n        /** @param props.match.params.testMode */\r\n        constructor(props) {\r\n            super(props);\r\n            const testMode = props && props.match && props.match.params && props.match.params.testMode\r\n                                && props.match.params.testMode.indexOf(\"testMode\") > -1 && props.match.params.testMode;\r\n            this.state = getInitialState(this, testMode || \"\");\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <ModelContext.Provider value={this.state}>\r\n                    {this.props.children}\r\n                </ModelContext.Provider>\r\n            )\r\n        }\r\n    }\r\n\r\n    const connect =(UserComponent, componentProps) => {\r\n        return (\r\n            <ModelContext.Consumer>\r\n                {(vm) => (\r\n                    <UserComponent {...vm} {...componentProps} />\r\n                )}\r\n            </ModelContext.Consumer>\r\n        );\r\n    };\r\n\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    return { ModelContext, ModelProvider, connect };\r\n};","import { createContext } from \"../../utility/modelContext\";\r\nimport {setToken, getStore, isLoggedIn} from \"./userAuthStore\";\r\nimport {b64toBlob} from \"../../utility/helpers\";\r\nimport {createUserApi, checkUserFace, getUserAccountPassword} from './userMessages';\r\nlet provider = null;\r\n\r\nexport const createModel = () => {\r\n    const userStore = getStore();\r\n    return {\r\n        userNotAuthorized: false,\r\n        userLoggedIn: isLoggedIn(),\r\n        firstName: userStore.firstName,\r\n        lastName: userStore.lastName,\r\n        picUrl: userStore.picUrl,\r\n        userFeatures: userStore.featurePermissions ||[],\r\n        faceLoginMessage:null,\r\n        passwordMessage:'',\r\n        confirmPasswordMessage:'',\r\n        profileLoading: false,\r\n\r\n        onSetAccount,\r\n        onNotifyMainNavOfLogOff,\r\n        onCreateProfile,\r\n        onFaceLogin,\r\n        checkPassword,\r\n        clearPasswordMessage,\r\n        onPasswordLogin\r\n\r\n    };\r\n};\r\n\r\nexport const  getInitialState = (classInstance) => {\r\n    provider = classInstance;\r\n    return  createModel();\r\n};\r\n\r\nconst onNotifyMainNavOfLogOff = () => {\r\n    //clearToken();\r\n    provider.setState({userLoggedIn: false});\r\n};\r\n\r\nconst onSetAccount = (loginInfo) => {\r\n\r\n\r\n    if(loginInfo.token.indexOf(\".\") > -1 || true) {\r\n\r\n        const tokenData = setToken(loginInfo);\r\n        console.log(\"tokenData\");\r\n        console.log(tokenData);\r\n        provider.setState({picUrl: loginInfo.picUrl,\r\n            firstName: loginInfo.firstName, lastName: loginInfo.lastName, userName:loginInfo.userName,\r\n            userFeatures: tokenData.features, userLoggedIn : true});\r\n    } else\r\n        provider.setState({userNotAuthorized : true, firstName: loginInfo.firstName, lastName: loginInfo.lastName});\r\n};\r\n\r\nconst onCreateProfile = ({firstName, lastName, imageSrc, password, signatureSrc, userName}) => {\r\n    const split = imageSrc.split(',');\r\n    const profileImage = b64toBlob(split[1], 'image/jpeg');\r\n    const sigSplit = signatureSrc.split(',');\r\n    const signatureBlob = b64toBlob(sigSplit[1],'image/png');\r\n\r\n    provider.setState({profileLoading:true});\r\n    createUserApi(profileImage,'enroll',firstName, lastName,password, signatureBlob, userName ).then((result) =>{\r\n        provider.setState(...result);\r\n        onSetAccount(result);\r\n\r\n    })\r\n};\r\n\r\nconst onFaceLogin =(imageSrc) =>{\r\n    const split = imageSrc.split(',');\r\n    const image = b64toBlob(split[1], 'image/jpeg');\r\n    provider.setState({profileLoading:true});\r\n    checkUserFace(image,'login').then((result)=>{\r\n        console.log(result);\r\n        if(!result.token ){\r\n            provider.setState({...result,faceLoginMessage:'No User Found, please try again or Create account'})\r\n        }else if (result.token){\r\n            onSetAccount(result);\r\n            provider.setState({...result,faceLoginMessage:''})\r\n\r\n\r\n\r\n        }\r\n    })\r\n\r\n};\r\nconst onPasswordLogin =({userName, password}) =>{\r\n    provider.setState({profileLoading:true});\r\n\r\n    getUserAccountPassword(userName, password).then((result)=>{\r\n        provider.setState({...result,passwordMessage:''});\r\n\r\n        onSetAccount(result);\r\n    }).catch(error => provider.setState({passwordMessage:'UserName or Password Incorrect'}))\r\n\r\n};\r\n\r\nconst checkPassword = (password, confirmPassword) => {\r\n        const passw = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,100}$/;\r\n\r\n        if ((password.match(passw)) && (confirmPassword === password)) {\r\n            provider.setState({passwordMessage: '', confirmPasswordMessage: ''});\r\n            return true;\r\n        } else {\r\n            (password.match(passw)? provider.setState({passwordMessage: ''}):\r\n                provider.setState({passwordMessage: 'Password needs to be 7 long characters with at least one numeric digit and a special character'}));\r\n\r\n            ((confirmPassword === password)? provider.setState({confirmPasswordMessage: ''}):\r\n                provider.setState({confirmPasswordMessage: 'Passwords do not match'}));\r\n\r\n            return false;\r\n        }\r\n\r\n\r\n\r\n};\r\nconst clearPasswordMessage = () => {\r\n    provider.setState({passwordMessage: '', confirmPasswordMessage: ''});\r\n};\r\n\r\nexport default createContext(createModel, getInitialState);\r\n","import {getAuthHeaderValue} from \"./userAuthStore\";\r\nimport {getConfig} from \"../configStore\";\r\nimport {handleResponse} from \"../../utility/helpers\";\r\n\r\nexport const getHardCodeUserList = () => {\r\n    const result = [\r\n        {\"firstName\" : \"Jim\", \"lastName\" : \"Bob\", \"userName\" : \"jbob\"},\r\n        {\"firstName\" : \"Jane\", \"lastName\" : \"Smith\", \"userName\" : \"jsmith\"},\r\n        {\"firstName\" : \"Bill\", \"lastName\" : \"Smith\", \"userName\" : \"bsmith\"},\r\n    ];\r\n    return new Promise(({resolve}) => {\r\n        resolve({\r\n            users: result,\r\n            usersLoading: false,\r\n            usersLoaded: true,\r\n            usersHasError: false,\r\n            usersMessage: \"\",\r\n            usersLoadMessageDetail: \"\"\r\n        });\r\n    });\r\n};\r\nexport const createUserApi = (payload, action,firstName, lastName,  password, signatureSrc, userName) => {\r\n    const {profileUrl, collectionId, profileApiCode, bucketName} = getConfig();\r\n\r\n    const url = `${profileUrl}/api/trigAWSLogin?code=${profileApiCode}&bucketName=${bucketName}&action=${action}&collectionName=${collectionId}&firstName=${firstName}&lastName=${lastName}&password=${password}&userName=${userName}&userRole=teller`;\r\n    const formData = new FormData();\r\n    formData.append('image',payload);\r\n    formData.append('signature', signatureSrc);\r\n\r\n\r\n    const payloadGeneric = {\r\n        method: \"POST\",\r\n        credentials: 'same-origin',\r\n        body: formData\r\n    };\r\n    return fetch(url, payloadGeneric)\r\n        .then(handleResponse()).then((result) => {\r\n            return {\r\n                token : result.FaceId,\r\n                firstName:result.firstName,\r\n                lastName:result.lastName,\r\n                picUrl:result.imageUrl,\r\n                signatureUrl: result.signatureUrl,\r\n                userName:result.userName,\r\n                userRole:result.userRole,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileLoadingError: false,\r\n                profileLoadingMessage: \"\",\r\n                profileLoadingMessageError: \"\"\r\n            };\r\n        }).catch((error) => {\r\n            return {\r\n                profile : null,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileLoadingError: true,\r\n                profileLoadingMessage: \"\",\r\n                profileLoadingMessageError: error.message\r\n            };\r\n        });\r\n};\r\nexport const checkUserFace = (payload, action,firstName, lastName,) => {\r\n    const {profileUrl, collectionId, profileApiCode, bucketName} = getConfig();\r\n    //${profileUrl}\r\n    const url = `${profileUrl}/api/trigawslogin?code=${profileApiCode}&bucketName=${bucketName}&action=login&collectionName=${collectionId}`;\r\n    const formData = new FormData();\r\n    formData.append('image',payload);\r\n\r\n\r\n    const payloadGeneric = {\r\n        method: \"POST\",\r\n        credentials: 'same-origin',\r\n        body: formData\r\n    };\r\n    return fetch(url, payloadGeneric)\r\n        .then(handleResponse()).then((result) => {\r\n            return {\r\n                token : result.FaceId,\r\n                firstName:result.firstName,\r\n                lastName:result.lastName,\r\n                picUrl:result.imageUrl,\r\n                signatureUrl: result.signatureUrl,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileLoadingError: false,\r\n                profileLoadingMessage: \"\",\r\n                profileLoadingMessageError: \"\"\r\n            };\r\n        }).catch((error) => {\r\n            return {\r\n                profile : null,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileLoadingError: true,\r\n                profileLoadingMessage: \"\",\r\n                profileLoadingMessageError: error.message\r\n            };\r\n        });\r\n};\r\nexport const getUserList = () => {\r\n    const {profileUrl, profilesApiCode} = getConfig();\r\n    //${profileUrl}\r\n    const url = `${profileUrl}/api/trigaccount?code=${profilesApiCode}`;\r\n\r\n\r\n\r\n    const payloadGeneric = {\r\n        method: \"GET\",\r\n        credentials: 'same-origin',\r\n    };\r\n    return fetch(url, payloadGeneric)\r\n        .then(handleResponse()).then((result) => {\r\n            return {\r\n                users: result,\r\n                usersLoading: false,\r\n                usersLoaded: true,\r\n                usersHasError: false,\r\n                usersMessage: \"\",\r\n                usersLoadMessageDetail: \"\"\r\n            };\r\n        }).catch((error) => {\r\n            return {\r\n                users: [],\r\n                usersLoading: false,\r\n                usersLoaded: true,\r\n                usersHasError: true,\r\n                usersMessage: \"\",\r\n                usersLoadMessageDetail: error.message\r\n            };\r\n        });\r\n};\r\n\r\nexport const getUserAccountPassword = (userName, password) =>{\r\n    const {profileUrl, profilesApiCode} = getConfig();\r\n    //${profileUrl}\r\n    const url = `${profileUrl}/api/trigaccount?code=${profilesApiCode}&userName=${userName}&password=${password}`;\r\n    const payloadGeneric = {\r\n        method: \"GET\",\r\n        credentials: 'same-origin',\r\n    };\r\n    return fetch(url, payloadGeneric)\r\n        .then(handleResponse()).then((result) => {\r\n            return {\r\n                token : result.FaceId,\r\n                firstName:result.firstName,\r\n                lastName:result.lastName,\r\n                picUrl:result.imageUrl,\r\n                signatureUrl: result.signatureUrl,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileLoadingError: false,\r\n                profileLoadingMessage: \"\",\r\n                profileLoadingMessageError: \"\"\r\n            };\r\n        }).catch((error) => {\r\n            return {\r\n                profile : null,\r\n                profileLoading: false,\r\n                profileLoaded: true,\r\n                profileLoadingError: true,\r\n                profileLoadingMessage: \"\",\r\n                profileLoadingMessageError: error.message\r\n            };\r\n        });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {useState} from \"react\";\r\nimport { Card, CardContent,\r\n    CardActions, Button } from \"@material-ui/core\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport { Input as LoginIcon } from '@material-ui/icons';\r\nimport accountModel from \"../../models/accounts/accountModel\";\r\nimport {connectArray} from \"../../utility/helpers\";\r\n\r\n\r\nexport const LogInComponent = ({userNotAuthorized, firstName, lastName,\r\n                                   onSetAccount, onCreateProfile, onFaceLogin, faceLoginMessage,profileLoading}) => {\r\n    const classes = useStyles();\r\n    const [faceRecognition, openFaceRecognition] = useState(false);\r\n    const [createProfile, openCreateAccount] = useState(false);\r\n    const [passwordLogin, setPasswordLogin] = useState(false);\r\n    // noinspection HtmlUnknownTarget\r\n    return (\r\n        <form id=\"logon-submit\"\r\n              action=\"/login/google/source\"\r\n              className={classes.mainContainer}>\r\n            <Card style={{display: \"flex\"}}>\r\n                <div className={classes.outerCard}>\r\n                    <CardContent className={classes.cardContainer}>\r\n                        <img src={\"ncr_logo.jpg\"}\r\n                             className={classes.logo}/>\r\n\r\n                        {userNotAuthorized && <div>User {firstName} {lastName} is not authorized to use this site</div>}\r\n                    </CardContent>\r\n\r\n                </div>\r\n            </Card>\r\n        </form>\r\n    );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n    mainContainer:{width: \"80%\", maxWidth: 460, margin: '100px auto'},\r\n    leftContainer: {height: 400,width: 300, paddingLeft: 4},\r\n    cardContainer: {minHeight: 170,minWidth:240, textAlign:'center'},\r\n    logo: {width: 250, margin: \"auto\"},\r\n    actionButton: {width: \"80%\", margin:\"10px\"},\r\n    messageContainer: { display: \"flex\", width:235, margin:\"40px auto\"},\r\n    iconSpacing: { marginRight: 12},\r\n    outerCard: {margin: \"45px auto\"},\r\n    cardActionsContainer:{display:'flex', flexDirection: 'column'}\r\n});\r\n\r\nexport const LogIn = connectArray(LogInComponent, [accountModel]);\r\n","import React from 'react';\r\nimport { Route, withRouter } from 'react-router-dom';\r\nimport { LogIn } from \"../desktop/accounts/LoginStart\";\r\n//this module is used to get a backdoor to the react router history object.\r\n//did not want ot pass history object all the way through to utility modules\r\nconst historyModel = {\r\n    loaded: false,\r\n    history: null\r\n};\r\n\r\nconst LoginRouteComponent = ({history}) => {\r\n    setHistory(history);\r\n    return (\r\n        <Route exact path=\"/login\" component={LogIn} />\r\n    );\r\n};\r\n\r\nconst setHistory = (history) => {\r\n    historyModel.history = history;\r\n    historyModel.loaded = true;\r\n};\r\n\r\nexport const getHistory = () => {\r\n    return historyModel;\r\n};\r\n\r\nexport const navigate = (location) => {\r\n    window.location.href = location;\r\n};\r\n\r\n// noinspection JSCheckFunctionSignatures\r\nexport const getLoginRoute = () => withRouter(LoginRouteComponent);"],"sourceRoot":""}