(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(161)},111:function(e,t,a){},16:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(104),r=function(e,t,a){void 0===a&&(a=null);var r=[],o=null!==a?Object(n.a)(a)(e):e;return t.forEach((function(e,t){if(0===t){r.push((function(t){return e.connect(o,t)}))}else{r.push((function(a){return e.connect(r[t-1],a)}))}})),r[r.length-1]};var o=function(){return function(e){if(e.ok)return e.json();throw new Error(e.status)}},i=function(e,t,a){void 0===t&&(t=""),void 0===a&&(a=512);for(var n=atob(e),r=[],o=0;o<n.length;o+=a){for(var i=n.slice(o,o+a),s=new Array(i.length),l=0;l<i.length;l++)s[l]=i.charCodeAt(l);var c=new Uint8Array(s);r.push(c)}return new Blob(r,{type:t})}},161:function(e,t,a){"use strict";a.r(t);a(111);var n,r=a(0),o=a.n(r),i=a(7),s=a(78),l=a.n(s),c=a(97),u=a(59),m=a(8),d=a(57),g=a(35),f=function(e){var t=e.children;return o.a.createElement(g.a.ModelProvider,null,t)},p=a(58),h=a(102),v=a(90),b=a(193),w=a(16),N=a(190),L=a(191),O=a(192),E=[{label:"Home",icon:N.a,selected:!(window.location.href.includes("cashMovements")||window.location.href.includes("keyLogs")),link:"#/",route:"/",isMobile:!0},{label:"Cash Move",icon:L.a,selected:window.location.href.includes("cashMovements"),link:"#/cashMovements",route:"/cashMovements",featureId:1,isMobile:!0},{label:"Key Logs",icon:O.a,selected:window.location.href.includes("keyLogs"),link:"#/keyLogs",route:"/keyLogs",featureId:1,isMobile:!0}],S=a(28),M=n?E.filter((function(e){return e.isMobile})):E,I=[{label:"Logout",icon:b.a,link:"#/logout"}],j=Object(w.b)((function(e){var t=e.children,a=(e.firstName,e.lastName,e.userLoggedIn,e.picUrl,e.userFeatures),n=function(){var e=Object(r.useState)(window.innerWidth<=760),t=e[0],a=e[1],n=function(){a(window.innerWidth<=760)};return Object(r.useEffect)((function(){return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}})),t}(),i=x(n),s=Object(S.b)(),l=(s.isLoading,s.isAuthenticated),c=(s.error,s.user),u=(s.loginWithRedirect,s.logout,M.filter((function(e){return void 0===e.featureId||a.indexOf(e.featureId)>-1})));return console.log(c),l&&o.a.createElement("div",null,o.a.createElement(h.SideStrip,{mainLinks:u,bottomLinks:I,onMenuClose:function(){},expandMenu:!1,userLabel:c.name,imageUrl:decodeURIComponent(c.picture)}),o.a.createElement("div",{className:i.mainContainer},t))||o.a.createElement("div",null,t)}),[g.a]),x=function(e){return Object(v.a)({mainContainer:{marginLeft:e?0:70}})()},k=a(24),y=a(189),C=a(183),U=a(184),P=a(195),A=a(93),T=a(194),R=o.a.createElement(y.a,null,"You have been logged out."),F=o.a.createElement("span",null,"... logging out please wait"),W=Object(w.b)((function(e){var t=e.onNotifyMainNavOfLogOff,a=e.userLoggedIn,n=D(),i=Object(S.b)(),s=i.loginWithRedirect,l=i.logout,c=i.isAuthenticated,u=i.isLoading;return Object(r.useEffect)((function(){Object(k.a)(),c&&l({returnTo:window.location.origin+"/#/logout"}),a&&t()})),o.a.createElement("form",{id:"logout-submit",className:n.mainContainer},!u&&!c&&o.a.createElement(C.a,{style:{display:"flex"}},o.a.createElement("div",{className:n.outerCard},o.a.createElement(U.a,{className:n.cardContainer},o.a.createElement("img",{src:"retail-shop-flat-icon_small.jpg",className:n.logo}),o.a.createElement("div",{className:n.messageContainer},o.a.createElement(T.a,{className:n.iconSpacing}),R)),o.a.createElement(P.a,null,o.a.createElement(A.a,{variant:"contained",color:"secondary",className:n.actionButton,onClick:function(){s()}},o.a.createElement(b.a,{style:{marginRight:10}})," Login")))),(u||c)&&F)}),[g.a]),D=Object(v.a)({mainContainer:{width:"80%",maxWidth:460,margin:"100px auto"},leftContainer:{height:400,width:300,paddingLeft:4},cardContainer:{minHeight:170},logo:{width:250,margin:"auto"},actionButton:{width:"80%",margin:"auto"},messageContainer:{display:"flex",width:235,margin:"40px auto"},iconSpacing:{marginRight:12},outerCard:{margin:"45px auto"}}),z=function(e){e.history;var t=Object(S.b)(),a=t.user,n=t.isAuthenticated;return o.a.createElement("div",null,"Hi test",n&&o.a.createElement("div",null,o.a.createElement("h2",null,a.name),o.a.createElement("p",null,a.email),o.a.createElement("p",null,a.user_metadata&&a.user_metadata.retailDomain)))},H=(a(60),a(103),o.a.createElement(m.b,{exact:!0,path:"/logOut",component:W})),B=o.a.createElement(m.b,{exact:!0,path:"/logcomplete",component:W}),J=function(e){function t(){var t;return(t=e.call(this)||this).state={isMobile:window.innerWidth<=760},t}Object(u.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;Object(k.d)();window.addEventListener("resize",(function(){e.setState({isMobile:window.innerWidth<=760})}));var t=this.props.auth0,a=(t.user,t.getAccessTokenSilently);(function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:t=e.sent,console.log(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("---------------"),console.log(e.t0.message||e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()},a.render=function(){var e=Object(p.getLoginRoute)(),t=(this.state.isMobile,j);return o.a.createElement(f,null,o.a.createElement(d.a,null,o.a.createElement(t,null,o.a.createElement("div",null,o.a.createElement(e,null),H,B,o.a.createElement(m.b,{permission:1,exact:!0,path:"/",component:z})))))},t}(o.a.Component),_=Object(S.c)(J),Z=a(43),$=a(188),Y=a(69),q=a(196),G=Object(Z.a)({typography:{useNextVariants:!0},palette:{textColor:Y.a.A700,primary:{main:"#3d6090",success:"#4caf50",idle:q.a[500]},secondary:{main:"#428bca"}}});Object(i.render)(o.a.createElement(S.a,{domain:"netware.auth0.com",clientId:"Aa7xpZd1nciCoIStp8BYJZO2Oix8WH2R",audience:"https://eventnod.netware.io",redirectUri:window.location.origin+"/retailUiAdmin"},o.a.createElement($.a,{theme:G},o.a.createElement(_,null))),document.querySelector("#app"))},24:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"a",(function(){return d}));var n={token:localStorage.getItem("token"),firstName:localStorage.getItem("firstName")||"",lastName:localStorage.getItem("lastName")||"",picUrl:localStorage.getItem("picUrl")||"",signatureUrl:localStorage.getItem("signatureUrl")||"",featurePermissions:[],userId:localStorage.getItem("userId"),expiresOn:parseInt(localStorage.getItem("expiresOn"))||0,logOutTimer:-1};try{var r=localStorage.getItem("featurePermissions");n.featurePermissions=r?JSON.parse(r):[]}catch(e){n.featurePermissions=[]}var o=function(){i(n.expiresOn)},i=function(e){var t=a(58).navigate;s();var r=1e3*e-new Date-6e4;r>30?n.logOutTimer=setTimeout((function(){return t("#/logout")}),r):e>0&&t("#/logout")},s=function(){n.logOutTimer>-1&&(clearTimeout(n.logOutTimer),n.logOutTimer=-1)},l=function(){return n.token&&null!==n.token},c=function(){return n},u=function(e){return n.featurePermissions.indexOf(e)>-1},m=function(e){var t=e.token,a=e.firstName,r=e.lastName,o=e.picUrl,s=e.signatureUrl,l=e.userName;localStorage.setItem("token",t),localStorage.setItem("firstName",a),localStorage.setItem("lastName",r),localStorage.setItem("picUrl",o),localStorage.setItem("signatureUrl",s),localStorage.setItem("userName",l),n.token=t,n.firstName=a,n.lastName=r,n.picUrl=o,n.signatureUrl=s;var c={id:""+a.substring(0,1)+r,features:"[1,2,3,4,5,6]",exp:86400+((new Date).getTime()/1e3|0)};return console.log(c),localStorage.setItem("userId",c.id),localStorage.setItem("featurePermissions",JSON.stringify(c.features)),localStorage.setItem("expiresOn",c.exp),n.featurePermissions=c.features,n.userId=c.id,n.expiresOn=c.exp,console.log(n),i(c.exp),c},d=function(){n.token=null,n.userId=null,n.featurePermissions=[],localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("featurePermissions"),localStorage.removeItem("expiresOn"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName")}},35:function(e,t,a){"use strict";var n=a(60),r=a(98),o=a(59),i=a(0),s=a.n(i),l=a(24),c=a(16),u={apiToken:""};var m,d,g,f,p=function(){return u},h=null,v=function(){var e=Object(l.b)();return{userNotAuthorized:!1,userLoggedIn:Object(l.e)(),firstName:e.firstName,lastName:e.lastName,picUrl:e.picUrl,userFeatures:e.featurePermissions||[],faceLoginMessage:null,passwordMessage:"",confirmPasswordMessage:"",profileLoading:!1,onSetAccount:w,onNotifyMainNavOfLogOff:b,onCreateProfile:N,onFaceLogin:L,checkPassword:E,clearPasswordMessage:S,onPasswordLogin:O}},b=function(){h.setState({userLoggedIn:!1})},w=function(e){e.token.indexOf(".");var t=Object(l.f)(e);console.log("tokenData"),console.log(t),h.setState({picUrl:e.picUrl,firstName:e.firstName,lastName:e.lastName,userName:e.userName,userFeatures:t.features,userLoggedIn:!0})},N=function(e){var t=e.firstName,a=e.lastName,n=e.imageSrc,r=e.password,o=e.signatureSrc,i=e.userName,s=n.split(","),l=Object(c.a)(s[1],"image/jpeg"),u=o.split(","),m=Object(c.a)(u[1],"image/png");h.setState({profileLoading:!0}),function(e,t,a,n,r,o,i){var s=p(),l=s.profileUrl,u=s.collectionId,m=l+"/api/trigAWSLogin?code="+s.profileApiCode+"&bucketName="+s.bucketName+"&action="+t+"&collectionName="+u+"&firstName="+a+"&lastName="+n+"&password="+r+"&userName="+i+"&userRole=teller",d=new FormData;return d.append("image",e),d.append("signature",o),fetch(m,{method:"POST",credentials:"same-origin",body:d}).then(Object(c.c)()).then((function(e){return{token:e.FaceId,firstName:e.firstName,lastName:e.lastName,picUrl:e.imageUrl,signatureUrl:e.signatureUrl,userName:e.userName,userRole:e.userRole,profileLoading:!1,profileLoaded:!0,profileLoadingError:!1,profileLoadingMessage:"",profileLoadingMessageError:""}})).catch((function(e){return{profile:null,profileLoading:!1,profileLoaded:!0,profileLoadingError:!0,profileLoadingMessage:"",profileLoadingMessageError:e.message}}))}(l,"enroll",t,a,r,m,i).then((function(e){var t;(t=h).setState.apply(t,e),w(e)}))},L=function(e){var t,a,n,r,o,i,s=e.split(","),l=Object(c.a)(s[1],"image/jpeg");h.setState({profileLoading:!0}),(t=l,a=p(),n=a.profileUrl,r=a.collectionId,o=n+"/api/trigawslogin?code="+a.profileApiCode+"&bucketName="+a.bucketName+"&action=login&collectionName="+r,i=new FormData,i.append("image",t),fetch(o,{method:"POST",credentials:"same-origin",body:i}).then(Object(c.c)()).then((function(e){return{token:e.FaceId,firstName:e.firstName,lastName:e.lastName,picUrl:e.imageUrl,signatureUrl:e.signatureUrl,profileLoading:!1,profileLoaded:!0,profileLoadingError:!1,profileLoadingMessage:"",profileLoadingMessageError:""}})).catch((function(e){return{profile:null,profileLoading:!1,profileLoaded:!0,profileLoadingError:!0,profileLoadingMessage:"",profileLoadingMessageError:e.message}}))).then((function(e){console.log(e),e.token?e.token&&(w(e),h.setState(Object.assign({},e,{faceLoginMessage:""}))):h.setState(Object.assign({},e,{faceLoginMessage:"No User Found, please try again or Create account"}))}))},O=function(e){var t=e.userName,a=e.password;h.setState({profileLoading:!0}),function(e,t){var a=p(),n=a.profileUrl,r=a.profilesApiCode;return fetch(n+"/api/trigaccount?code="+r+"&userName="+e+"&password="+t,{method:"GET",credentials:"same-origin"}).then(Object(c.c)()).then((function(e){return{token:e.FaceId,firstName:e.firstName,lastName:e.lastName,picUrl:e.imageUrl,signatureUrl:e.signatureUrl,profileLoading:!1,profileLoaded:!0,profileLoadingError:!1,profileLoadingMessage:"",profileLoadingMessageError:""}})).catch((function(e){return{profile:null,profileLoading:!1,profileLoaded:!0,profileLoadingError:!0,profileLoadingMessage:"",profileLoadingMessageError:e.message}}))}(t,a).then((function(e){h.setState(Object.assign({},e,{passwordMessage:""})),w(e)})).catch((function(e){return h.setState({passwordMessage:"UserName or Password Incorrect"})}))},E=function(e,t){var a=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,100}$/;return e.match(a)&&t===e?(h.setState({passwordMessage:"",confirmPasswordMessage:""}),!0):(e.match(a)?h.setState({passwordMessage:""}):h.setState({passwordMessage:"Password needs to be 7 long characters with at least one numeric digit and a special character"}),t===e?h.setState({confirmPasswordMessage:""}):h.setState({confirmPasswordMessage:"Passwords do not match"}),!1)},S=function(){h.setState({passwordMessage:"",confirmPasswordMessage:""})};t.a=(m=v,d=function(e){return h=e,v()},g=s.a.createContext(m()),f=function(e){function t(t){var a;a=e.call(this,t)||this;var n=t&&t.match&&t.match.params&&t.match.params.testMode&&t.match.params.testMode.indexOf("testMode")>-1&&t.match.params.testMode;return a.state=d(Object(r.a)(a),n||""),a}return Object(o.a)(t,e),t.prototype.render=function(){return s.a.createElement(g.Provider,{value:this.state},this.props.children)},t}(s.a.Component),{ModelContext:g,ModelProvider:f,connect:function(e,t){return s.a.createElement(g.Consumer,null,(function(a){return s.a.createElement(e,Object(n.a)({},a,t))}))}})},58:function(e,t,a){"use strict";a.r(t),a.d(t,"getHistory",(function(){return v})),a.d(t,"navigate",(function(){return b})),a.d(t,"getLoginRoute",(function(){return w}));var n=a(0),r=a.n(n),o=a(8),i=a(183),s=a(184),l=a(90),c=a(35),u=a(16),m=Object(l.a)({mainContainer:{width:"80%",maxWidth:460,margin:"100px auto"},leftContainer:{height:400,width:300,paddingLeft:4},cardContainer:{minHeight:170,minWidth:240,textAlign:"center"},logo:{width:250,margin:"auto"},actionButton:{width:"80%",margin:"10px"},messageContainer:{display:"flex",width:235,margin:"40px auto"},iconSpacing:{marginRight:12},outerCard:{margin:"45px auto"},cardActionsContainer:{display:"flex",flexDirection:"column"}}),d=Object(u.b)((function(e){var t=e.userNotAuthorized,a=e.firstName,o=e.lastName,l=(e.onSetAccount,e.onCreateProfile,e.onFaceLogin,e.faceLoginMessage,e.profileLoading,m()),c=Object(n.useState)(!1),u=(c[0],c[1],Object(n.useState)(!1)),d=(u[0],u[1],Object(n.useState)(!1));d[0],d[1];return r.a.createElement("form",{id:"logon-submit",action:"/login/google/source",className:l.mainContainer},r.a.createElement(i.a,{style:{display:"flex"}},r.a.createElement("div",{className:l.outerCard},r.a.createElement(s.a,{className:l.cardContainer},r.a.createElement("img",{src:"ncr_logo.jpg",className:l.logo}),t&&r.a.createElement("div",null,"User ",a," ",o," is not authorized to use this site")))))}),[c.a]),g={loaded:!1,history:null},f=r.a.createElement(o.b,{exact:!0,path:"/login",component:d}),p=function(e){var t=e.history;return h(t),f},h=function(e){g.history=e,g.loaded=!0},v=function(){return g},b=function(e){window.location.href=e},w=function(){return Object(o.f)(p)}}},[[110,1,2]]]);
//# sourceMappingURL=app.49a634e3.js.map